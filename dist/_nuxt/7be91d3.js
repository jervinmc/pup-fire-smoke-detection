(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{670:function(e,t,o){var content=o(700);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(24).default)("710d6a94",content,!0,{sourceMap:!1})},699:function(e,t,o){"use strict";o(670)},700:function(e,t,o){var r=o(23)((function(i){return i[1]}));r.push([e.i,".hover-grey[data-v-3548d538]:hover{background-color:#f1f1f1!important;cursor:pointer;transition:background-color .2s ease-in-out}.air-labels>span[data-v-3548d538]{font-size:.85rem;text-align:center;width:16%}.pulse[data-v-3548d538]{animation:pulse-3548d538 1s ease-in-out}@keyframes pulse-3548d538{0%{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}to{opacity:1;transform:scale(1)}}",""]),r.locals={},e.exports=r},744:function(e,t,o){"use strict";o.r(t);var r=o(616),n=o(634),l=o(632),c=o(627),d=o(631),v=o(224),f=o(216),h=o(136),m=o(76),_=o(626),y=o(738),w=o(7),k=(o(32),o(59),o(658)),x=o.n(k),C={data:function(){return{temperature:"N/A",sensorValue:"N/A",airQuality:120,videoBaseUrl:"http://fire-smoke-detection-pup.s3.ap-southeast-2.amazonaws.com/",videoSrc:"",videoLogs:[],previousVideoLogsLength:0}},computed:{airQualityColor:function(){var e=this.airQuality;return e<=50?"green":e<=100?"yellow":e<=150?"orange":e<=200?"red":e<=300?"purple":"brown"}},methods:{getAllData:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){var o,r,n,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/logs/");case 3:r=t.sent,null!==(o=r.data)&&void 0!==o&&o.length&&(d=r.data[0],e.sensorValue=null!==(n=d.logs)&&void 0!==n?n:"N/A",e.temperature=null!==(l=d.temperature)&&void 0!==l?l:"N/A",e.airQuality=null!==(c=d.airQuality)&&void 0!==c?c:120),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching logs:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},loadVideoLogs:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){var o,r,n,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/videologs/");case 3:o=t.sent,r=o.data||[],n=r.length>e.previousVideoLogsLength,e.videoLogs=r,e.previousVideoLogsLength=r.length,!n&&e.videoSrc||(c=null===(l=e.videoLogs[0])||void 0===l?void 0:l.video_link)&&(e.videoSrc="".concat(c,"?t=").concat(Date.now())),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("Error fetching video logs:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},refreshVideo:function(){if(this.videoLogs.length>0){var e=this.videoLogs[0].video_link;this.videoSrc="".concat(e,"?t=").concat(Date.now())}else console.warn("No video logs available to reset to.")},selectVideo:function(e){var t=Date.now();this.videoSrc="".concat(e,"?t=").concat(t)}},mounted:function(){var e=this;this.getAllData(),this.loadVideoLogs(),new x.a("29e101e910ebcfc920cf",{cluster:"eu"}).subscribe("my-channel").bind("my-event",(function(){e.getAllData(),e.loadVideoLogs()}))}},L=(o(699),o(98)),component=Object(L.a)(C,(function(){var e=this,t=e._self._c;return t(d.a,{staticClass:"pa-10",attrs:{fluid:""}},[t(_.a,{staticClass:"mb-8",attrs:{align:"stretch"}},[t(c.a,{attrs:{cols:"12",md:"6"}},[t(v.c,{attrs:{mode:"in-out"}},[t(n.a,{key:"live-stream-card",staticClass:"pa-4 rounded-lg",attrs:{color:"#e3f2fd",elevation:"5"}},[t(l.c,{staticClass:"d-flex justify-space-between align-center"},[t("span",{staticClass:"font-weight-bold"},[e._v("üé• Live Stream")]),e._v(" "),t(r.a,{attrs:{small:"",color:"primary",elevation:"2"},on:{click:e.refreshVideo}},[e._v("\n                            Reset Stream\n                        ")])],1),e._v(" "),t(l.b,[t("video",{staticStyle:{width:"100%",height:"300px","object-fit":"cover","border-radius":"8px"},attrs:{src:e.videoSrc,controls:"",autoplay:"",muted:"",loop:""},domProps:{muted:!0}})])],1)],1)],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"6"}},[t(v.f,{attrs:{group:""}},[t(n.a,{key:"video-clips-card",staticClass:"pa-4 rounded-lg",attrs:{color:"#fff3e0",elevation:"5"}},[t(l.c,{staticClass:"font-weight-bold"},[e._v("üìÇ Recent Video Clips")]),e._v(" "),t(l.b,{staticStyle:{"max-height":"300px","overflow-y":"auto"}},[t(f.a,{attrs:{dense:"",nav:""}},e._l(e.videoLogs,(function(o){return t(h.a,{key:o.id,staticClass:"rounded hover-grey",on:{click:function(t){return e.selectVideo(o.video_link)}}},[t(m.a,[t(m.c,{staticClass:"text-truncate"},[e._v("\n                                        "+e._s(o.video_link)+"\n                                    ")]),e._v(" "),t(m.b,[e._v("\n                                        "+e._s(new Date(o.timestamp).toLocaleString())+"\n                                    ")])],1)],1)})),1)],1)],1)],1)],1)],1),e._v(" "),t(_.a,{staticClass:"mb-8"},[t(c.a,{attrs:{cols:"12",md:"6"}},[t(v.d,[t(n.a,{key:"temperature-"+e.temperature,staticClass:"pa-4 rounded-lg sensor-card",attrs:{color:"#e8f5e9",elevation:"4"}},[t(l.c,{staticClass:"font-weight-bold"},[e._v("üå°Ô∏è Temperature")]),e._v(" "),t(l.b,{staticClass:"text-h4 font-weight-bold text-center pulse"},[e._v("\n                        "+e._s(e.temperature)+"¬∞C\n                    ")])],1)],1)],1),e._v(" "),t(c.a,{attrs:{cols:"12",md:"6"}},[t(v.d,[t(n.a,{key:"sensor-"+e.sensorValue,staticClass:"pa-4 rounded-lg sensor-card",attrs:{color:"#fce4ec",elevation:"4"}},[t(l.c,{staticClass:"font-weight-bold"},[e._v("üî¨ Sensor Value")]),e._v(" "),t(l.b,{staticClass:"text-h4 font-weight-bold text-center pulse"},[e._v("\n                        "+e._s(e.sensorValue)+"\n                    ")])],1)],1)],1)],1),e._v(" "),t(_.a,[t(c.a,{attrs:{cols:"12"}},[t(v.c,[t(n.a,{key:"air-quality-card",staticClass:"pa-4 rounded-lg",attrs:{color:"#ede7f6",elevation:"5"}},[t(l.c,{staticClass:"font-weight-bold"},[e._v("üå¨Ô∏è Air Quality")]),e._v(" "),t(l.b,[t(y.a,{attrs:{min:0,max:500,step:"1",ticks:"","tick-size":"4",color:e.airQualityColor,"track-color":"grey lighten-1","thumb-label":"always"},model:{value:e.airQuality,callback:function(t){e.airQuality=t},expression:"airQuality"}}),e._v(" "),t("div",{staticClass:"d-flex justify-space-between mt-3 air-labels"},[t("span",[e._v("Good")]),e._v(" "),t("span",[e._v("Moderate")]),e._v(" "),t("span",[e._v("Poor")]),e._v(" "),t("span",[e._v("Unhealthy")]),e._v(" "),t("span",[e._v("Severe")]),e._v(" "),t("span",[e._v("Hazardous")])])],1)],1)],1)],1)],1)],1)}),[],!1,null,"3548d538",null);t.default=component.exports}}]);